var DCSS=function(e){null==e?(this.domElement=document,console.warn("Missing target, DCss will use the entire document as a fallback. Pass document/id as a parameter.")):e==document?this.domElement=document:this.domElement=document.getElementById(e),this.offsetX=50,this.offsetY=40,this.snapViewer=!1,this.hoverViewer=!1,this.snapping=!1,this.width=400,this.height=400,this.view,this.html={},this.css={},this.dConsole;let t=this;this.init=function(){this.view=document.createElement("div"),this.view.id="viewer",document.body.appendChild(this.view),this.css.view=this.view.style,this.consolePanel(),this.initCss()},this.initCss=(()=>{this.css.view.cssText="display: none; width: "+this.width+"px; height: "+this.height+"px; background: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.4) 0px 0px 50px; padding: 20px; position: fixed; z-index: 99999999; overflow: scroll; left: 0x; top: 0px"}),this.followView=(e=>{this.hoverViewer=!0,this.css.view.display="block";let i=e.clientX,n=e.clientY;if(0==this.snapViewer){let o=e.clientX>window.innerWidth/2,s=e.clientY>window.innerHeight/2;window.innerWidth<2*(this.width+this.offsetX)?(this.css.view.left=window.innerWidth/2-this.width/2+"px",s?this.css.view.top=this.css.view.top=n-this.offsetY-this.width+"px":!s&&(this.css.view.top=n+this.offsetY+"px")):(o?this.css.view.left=i-t.offsetX-this.width+"px":!o&&(this.css.view.left=i+t.offsetX+"px"),s?this.css.view.top=n-t.offsetY-this.height+"px":!s&&(this.css.view.top=n+t.offsetY+"px"))}}),this.consolePanel=(()=>{let e;"undefined"!=typeof console&&(void 0!==console.log?console.olog=console.log:console.olog=(()=>{})),console.log=(t=>{if(console.olog(t),e==t);else{t.toString(),this.dConsole=document.createElement("pre");let i=document.createTextNode(t);this.dConsole.classList.add("__viewLog__"),this.dConsole.append(i),this.view.append(this.dConsole),this.view.scrollTop=this.view.scrollHeight-this.view.clientHeight,e=t}}),console.warn=console.error=console.info=console.info=console.log}),this.snapView=(e=>{this.snapping&&this.snapViewer&&(this.css.view.left=e.clientX-this.width/2+"px",this.css.view.top=e.clientY-10+"px")}),this.init(),function(){"use strict";if(!console.log.toDiv){console.log.bind(console);var e=console.error.bind(console),t=console.warn.bind(console),i=console.table?console.table.bind(console):null,n=function(){var e=document.createElement("div");e.id="legend",document.getElementById("viewer").appendChild(e);var t=document.createElement("div");return t.id="console-log-text",document.getElementById("viewer").appendChild(t),t}();console.log.toDiv=!0,console.error=function(){e.apply(null,arguments);var t=Array.prototype.slice.call(arguments,0);t.unshift("ERROR:"),s.apply(null,t)},console.warn=function(){t.apply(null,arguments);var e=Array.prototype.slice.call(arguments,0);e.unshift("WARNING:"),s.apply(null,e)},console.table=function(){"function"==typeof i&&i.apply(null,arguments);var e,t=arguments[0];void 0!==t[0]&&(e=Object.keys(t[0])),function(e,t){var i=t.length,n=e.length,o=document.createElement("table");o.style.width="100%",o.setAttribute("border","1");var s=document.createElement("thead"),l=document.createElement("td");l.innerHTML="Index",s.appendChild(l);for(var d=0;d<i;d++)(l=document.createElement("td")).innerHTML=t[d],s.appendChild(l);o.appendChild(s);for(var h=0;h<n;h++){var c=document.createElement("tr");(l=document.createElement("td")).innerHTML=h,c.appendChild(l);for(var r=0;r<i;r++)(l=document.createElement("td")).innerHTML=e[h][t[r]],c.appendChild(l);o.appendChild(c)}document.getElementById("console-log-text").appendChild(o)}(t,e)},window.addEventListener("error",function(e){s("EXCEPTION:",e.message+"\n  "+e.filename,e.lineno+":"+e.colno)})}function o(e){return"string"==typeof e?e:JSON.stringify(e)}function s(){var e=Array.prototype.slice.call(arguments,0).map(o).join(" "),t=document.createElement("div");t.textContent=e,n.appendChild(t)}}(),this.domElement.addEventListener("mouseout",()=>{!this.snapViewer&&(this.css.view.display="none"),this.hoverViewer=!1},!1),this.domElement.addEventListener("mousemove",t.followView,!1),window.addEventListener("mousemove",t.snapView,!1),window.onmousedown=(()=>{this.snapping=!0}),window.onmouseup=(()=>{this.snapping=!1}),window.onkeydown=(e=>{let t=(e.keyCode,e.which);this.snapViewer&&83==t?83!=t||this.snapViewer?83==t&&this.snapViewer&&(this.snapViewer=!1):this.snapViewer=!0:this.hoverViewer&&83==t&&(this.snapViewer=!0)})};